{"version":3,"sources":["webpack:///src/pages/singer/components/singer-detail.vue","webpack:///./src/api/getSongs.js","webpack:///./src/pages/singer/components/singer-detail.vue?dedb","webpack:///./src/pages/singer/components/singer-detail.vue"],"names":["singer_detail","name","data","songs","created","_this","this","setTimeout","_getData","methods","mid","_this2","singer","$router","push","path","assign_default","recommendParams","g_tk","hostUin","needNewCode","platform","order","begin","num","songstatus","singermid","Jsonp","param","then","res","code","ERR_OK","Error","catch","err","console","log","_initData","list","ret","forEach","item","musicData","songid","songmid","albummid","Object","song","computed","extends_default","title","bgImage","avatar","vuex_esm","components","v-detail","detail","components_singer_detail","render","_h","$createElement","_c","_self","attrs","appear","staticClass","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"+MAiBAA,GACAC,KAAA,gBACAC,KAFA,WAGA,OACAC,WAGAC,QAPA,WAOA,IAAAC,EAAAC,KACAC,WAAA,WACAF,EAAAG,YACA,KAEAC,SACAD,SADA,WACA,IC3ByBE,EAEfR,EDyBVS,EAAAL,KACAA,KAAAM,OAAAF,KACAJ,KAAAO,QAAAC,MACAC,KAAA,aC9ByBL,EDkCzBJ,KAAAM,OAAAF,IChCUR,EAAOc,OAAiBC,KAC1BC,KAAM,WACNC,QAAS,EACTC,YAAa,EACbC,SAAU,MACVC,MAAO,SACPC,MAAO,EACPC,IAAK,GACLC,WAAY,EACZC,UAAWhB,IAGRiB,YAbK,2DAaKzB,GACb0B,MAAM,kBACPC,KAAK,SAAAC,GACJ,GAAGA,EAAIC,OAASC,IACZ,OAAOF,EAAI5B,KAGf,MAAM,IAAI+B,MAAM,iBACjBC,MAAM,SAAAC,GACFA,GACCC,QAAQC,IAAI,WAAaF,MDUrCN,KAAA,SAAAC,GACAA,IACAnB,EAAAR,MAAAQ,EAAA2B,UAAAR,EAAAS,UAIAD,UAdA,SAcApC,GACA,IAAAsC,KAQA,OAPAtC,EAAAuC,QAAA,SAAAC,GAAA,IACAC,EAAAD,EAAAC,UAEAA,EAAAC,QAAAD,EAAAE,SAAAF,EAAAG,UACAN,EAAA1B,KAAAiC,OAAAC,EAAA,EAAAD,CAAAJ,MAEAP,QAAAC,IAAAG,GACAA,IAGAS,SAAcC,KACdC,MADA,WAEA,OAAA7C,KAAAM,OAAAX,MAEAmD,QAJA,WAKA,OAAA9C,KAAAM,OAAAyC,SAEAN,OAAAO,EAAA,EAAAP,EACA,YAGAQ,YACAC,WAAAC,EAAA,IEhEeC,GADEC,OAFjB,WAA0B,IAAaC,EAAbtD,KAAauD,eAA0BC,EAAvCxD,KAAuCyD,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,cAAwBE,OAAO/D,KAAA,SAAAgE,OAAA,MAA6BH,EAAA,OAAYI,YAAA,kBAA4BJ,EAAA,YAAiBE,OAAOb,MAA3L7C,KAA2L6C,MAAAC,QAA3L9C,KAA2L8C,QAAAjD,MAA3LG,KAA2LH,UAA2D,MAE/PgE,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEtE,EACA0D,GATF,EAVA,SAAAa,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/1.5c66ca1585f0a734996a.js","sourcesContent":["<template>\r\n    <transition name='slider' appear>\r\n        <div class=\"singer-detail\">\r\n            <v-detail :title='title'\r\n                    :bgImage='bgImage'\r\n                    :songs='songs'>\r\n            </v-detail>\r\n        </div>\r\n    </transition>\r\n</template>\r\n\r\n<script>\r\nimport Detail from 'common/detail/detail'\r\nimport {mapGetters} from 'vuex'\r\nimport {getSongs} from 'api/getSongs'\r\nimport {createSong} from 'js/song'   //重复添加对象，用实例化简化书写\r\n\r\nexport default {\r\n    name:'singer-detail',\r\n    data() {\r\n        return {\r\n            songs: []\r\n        }\r\n    },\r\n    created() {\r\n        setTimeout(() => {\r\n            this._getData();\r\n        },20)\r\n    },\r\n    methods: {\r\n        _getData() {\r\n            if(!this.singer.mid) {  //如果不存在，就返回singer页面\r\n                this.$router.push({\r\n                    path:'/singer'\r\n                })\r\n            }\r\n\r\n            getSongs(this.singer.mid).then(res => {\r\n                if(res) { \r\n                    this.songs = this._initData(res.list);  //将杂乱的数据整理在赋值\r\n                }\r\n            });\r\n        },\r\n        _initData(data) {\r\n            let ret = []; \r\n            data.forEach(item => {\r\n                let {musicData} = item;  //ES6写法，从item中获取musicData\r\n                //第一个是可以播放歌曲的id,第二个是歌曲播放ID，最后一个是歌曲图片ID\r\n                if(musicData.songid && musicData.songmid && musicData.albummid){\r\n                    ret.push(createSong(musicData));\r\n                }\r\n            });console.log(ret);\r\n            return ret;\r\n        }\r\n    },\r\n    computed: {\r\n        title() {\r\n            return this.singer.name;\r\n        },\r\n        bgImage() {\r\n            return this.singer.avatar;\r\n        },\r\n        ...mapGetters([\r\n            'singer'  //歌手信息\r\n        ])\r\n    },\r\n    components: {\r\n        'v-detail': Detail\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~styles/variable';\r\n@import '~styles/mixin';\r\n\r\n.slider-enter-active,\r\n.slider-leave-active\r\n    transition: all .3s\r\n.slider-enter,\r\n.slider-leave-to\r\n    transform: translate3d(100%,0,0) !important\r\n\r\n.singer-detail\r\n    overflow: hidden\r\n    fixed()\r\n    background: $color-background\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/singer/components/singer-detail.vue","import Jsonp from 'js/jsonp'\r\nimport {ERR_OK,recommendParams} from './config'\r\n\r\nexport const getSongs = (mid) => {\r\n    const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg';\r\n    const data = Object.assign({},recommendParams,{\r\n        g_tk: 1928093487,\r\n        hostUin: 0,\r\n        needNewCode: 0,\r\n        platform: 'yqq',\r\n        order: 'listen',\r\n        begin: 0,\r\n        num: 80,\r\n        songstatus: 1,\r\n        singermid: mid\r\n    });\r\n\r\n    return Jsonp(url,data,{\r\n        param:'jsonpCallback'\r\n    }).then(res => {\r\n        if(res.code === ERR_OK) {\r\n            return res.data\r\n        }\r\n        \r\n        throw new Error('没有获取到歌曲列表数据');\r\n    }).catch(err => {\r\n        if(err) {\r\n            console.log('歌曲列表获取失败' + err)\r\n        }\r\n    })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/getSongs.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slider\",\"appear\":\"\"}},[_c('div',{staticClass:\"singer-detail\"},[_c('v-detail',{attrs:{\"title\":_vm.title,\"bgImage\":_vm.bgImage,\"songs\":_vm.songs}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-71c4bc87\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/singer/components/singer-detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-71c4bc87\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singer-detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer-detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer-detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71c4bc87\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singer-detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-71c4bc87\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/singer/components/singer-detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}