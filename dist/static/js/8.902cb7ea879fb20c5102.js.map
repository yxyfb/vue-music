{"version":3,"sources":["webpack:///src/pages/rank/rank.vue","webpack:///./src/api/getRank.js","webpack:///./src/pages/rank/rank.vue?c1d3","webpack:///./src/pages/rank/rank.vue"],"names":["rank","mixins","mixin","data","topList","created","this","getData","methods","extends_default","_this","assign_default","recommendParams","g_tk","uin","needNewCode","platform","jsonp","param","then","res","code","ERR_OK","Error","catch","err","console","log","goRankDetail","item","$router","push","path","id","setTopList","changeListBottom","playList","bottom","length","$refs","rankWrapper","style","scroll","refresh","Object","vuex_esm","components","v-scroll","scroll_scroll","v-loading","loading","rank_rank","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","directives","name","rawName","value","expression","_l","list","key","on","click","$event","src","picUrl","_v","song","index","_s","songname","singername","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"6NAkCAA,GACAC,QAAAC,EAAA,GACAC,KAFA,WAGA,OACAC,aAGAC,QAPA,WAQAC,KAAAC,WAEAC,QAAaC,KACbF,QADA,WACA,ICxCUJ,EDwCVO,EAAAJ,MCxCUH,EAAOQ,OAAiBC,KAC1BC,KAAM,WACNC,IAAK,EACLC,YAAa,EACbC,SAAU,OAGPC,YARI,qDAQMd,GACbe,MAAO,kBACRC,KAAK,SAAAC,GACJ,GAAGA,EAAIC,OAASC,IACZ,OAAOF,EAAIjB,KAAKC,QAGpB,MAAM,IAAImB,MAAM,gBACjBC,MAAM,SAAAC,GACFA,GACCC,QAAQC,IAAI,WAAaF,MDwBrCN,KAAA,SAAAf,GACAA,IACAM,EAAAN,UAAAsB,QAAAC,IAAAvB,OAIAwB,aARA,SAQAC,GACAvB,KAAAwB,QAAAC,MACAC,KAAA,SAAAH,EAAAI,KAGA3B,KAAA4B,WAAAL,IAEAM,iBAfA,SAeAC,GACA,IAAAC,EAAAD,EAAAE,OAAA,aACAhC,KAAAiC,MAAAC,YAAAC,MAAAJ,SACA/B,KAAAiC,MAAAG,OAAAC,YAEAC,OAAAC,EAAA,EAAAD,EACAV,WAAA,kBAGAY,YACAC,WAAAC,EAAA,EACAC,YAAAC,EAAA,IEnEeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA/C,KAAagD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,cAAAC,YAAA,iBAA6CH,EAAA,YAAiBE,IAAA,SAAAC,YAAA,SAAAC,OAAyCzD,KAAAkD,EAAAjD,WAAoBoD,EAAA,MAAWK,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAX,EAAAjD,QAAAkC,OAAA,EAAA2B,WAAA,qBAAwFN,YAAA,QAAqBN,EAAAa,GAAAb,EAAA,iBAAAc,GAAqC,OAAAX,EAAA,MAAgBY,IAAAD,EAAAlC,GAAA0B,YAAA,YAAAU,IAAwCC,MAAA,SAAAC,GAAyB,OAAAlB,EAAAzB,aAAAuC,OAAgCX,EAAA,OAAYG,YAAA,aAAuBH,EAAA,OAAYI,OAAOY,IAAAL,EAAAM,YAAmBpB,EAAAqB,GAAA,KAAAlB,EAAA,MAAyBG,YAAA,cAAyBN,EAAAa,GAAAC,EAAA,kBAAAQ,EAAAC,GAA6C,OAAApB,EAAA,MAAgBY,IAAAQ,EAAAjB,YAAA,cAAkCH,EAAA,QAAAH,EAAAqB,GAAArB,EAAAwB,GAAAD,MAAAvB,EAAAqB,GAAA,KAAAlB,EAAA,QAA4DG,YAAA,cAAwBN,EAAAqB,GAAArB,EAAAwB,GAAAF,EAAAG,UAAA,MAAAzB,EAAAwB,GAAAF,EAAAI,mBAAkE,OAAO,KAAA1B,EAAAqB,GAAA,KAAAlB,EAAA,OAA6BK,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAA,IAAAX,EAAAjD,QAAAkC,OAAA2B,WAAA,uBAA4FN,YAAA,oBAAgCH,EAAA,iBAAAH,EAAAqB,GAAA,KAAAlB,EAAA,oBAE5gCwB,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEnF,EACAmD,GATF,EAVA,SAAAiC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/8.902cb7ea879fb20c5102.js","sourcesContent":["<template>\r\n    <div class=\"rank-wrapper\" ref='rankWrapper'>\r\n        <v-scroll class='scroll' :data='topList' ref='scroll'>\r\n            <ul class=\"rank\" v-show='topList.length>0'>\r\n                <li class=\"rank-item\" v-for='list of topList' :key='list.id'\r\n                    @click='goRankDetail(list)'>\r\n                    <div class=\"rank-pic\">\r\n                        <img :src=\"list.picUrl\">\r\n                    </div>\r\n                    <ul class=\"rank-songs\">\r\n                        <li class=\"song-desc\" v-for='(song,index) of list.songList' :key='index'>\r\n                            <span>{{index}}</span>\r\n                            <span class='song-name'>{{song.songname}} - {{song.singername}}</span>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n            </ul>\r\n        </v-scroll>\r\n\r\n        <div class=\"loading-wrapper\" v-show='topList.length===0'>\r\n            <v-loading></v-loading>\r\n        </div>\r\n\r\n        <router-view></router-view>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Scroll from 'common/scroll/scroll'\r\nimport {getRank} from 'api/getRank'\r\nimport Loading from 'common/loading/loading'\r\nimport {playListMixin} from 'js/mixin'\r\nimport {mapMutations} from 'vuex'\r\n\r\nexport default {\r\n    mixins:[playListMixin],\r\n    data() {\r\n        return {\r\n            topList: []\r\n        }\r\n    },\r\n    created() {\r\n        this.getData();\r\n    },\r\n    methods: {\r\n        getData() {\r\n            getRank().then(topList => {\r\n                if(topList) {\r\n                    this.topList = topList;console.log(topList)\r\n                }\r\n            });\r\n        },\r\n        goRankDetail(item) { //跳转到排行榜详情页\r\n            this.$router.push({\r\n                path:`/rank/${item.id}`\r\n            });\r\n\r\n            this.setTopList(item); //将点击得到排行榜信息存入vuex\r\n        },\r\n        changeListBottom(playList) { //混入，当播放列表有值时增加底部的padding\r\n            const bottom = playList.length > 0 ? '1.2rem' : 0;\r\n            this.$refs.rankWrapper.style.bottom = bottom;\r\n            this.$refs.scroll.refresh();\r\n        },\r\n        ...mapMutations({\r\n            setTopList:'SET_TOP_LIST'\r\n        })\r\n    },\r\n    components: {\r\n        'v-scroll': Scroll,\r\n        'v-loading': Loading\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~styles/variable';\r\n@import '~styles/mixin';\r\n\r\n.rank-wrapper\r\n    position: absolute\r\n    top: 1.76rem\r\n    bottom: 0\r\n    width: 100%\r\n    overflow: hidden\r\n    .scroll\r\n        absolute()\r\n        .rank\r\n            padding-bottom: .4rem\r\n            .rank-item\r\n                flex-center()\r\n                margin: 0 .4rem\r\n                padding-top: .4rem\r\n                .rank-pic\r\n                    flex: 0 0 2rem\r\n                    width: 2rem\r\n                    height: 2rem\r\n                    img\r\n                        width: 100%\r\n                        height: 100%\r\n                .rank-songs\r\n                    overflow: hidden\r\n                    padding: 0 .4rem\r\n                    flex: 1\r\n                    display: flex\r\n                    flex-direction: column\r\n                    justify-content: center\r\n                    height: 2rem\r\n                    font-size: $font-size-small\r\n                    color: $color-text-l\r\n                    background: $color-highlight-background\r\n                    .song-desc\r\n                        line-height: .52rem\r\n                        no-wrap()\r\n    .loading-wrapper\r\n        absolute()\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/rank/rank.vue","import jsonp from 'js/jsonp'\r\nimport {recommendParams,ERR_OK} from './config'\r\n\r\nexport const getRank = () => {\r\n    const url ='https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg';\r\n    const data = Object.assign({},recommendParams,{\r\n        g_tk: 1928093487,\r\n        uin: 0,\r\n        needNewCode: 1,\r\n        platform: 'h5'\r\n    });\r\n\r\n    return jsonp(url,data,{\r\n        param: 'jsonpCallback'\r\n    }).then(res => {\r\n        if(res.code === ERR_OK) {\r\n            return res.data.topList;\r\n        }\r\n\r\n        throw new Error('没有获取到排行榜数据');\r\n    }).catch(err => {\r\n        if(err) {\r\n            console.log('获取排行数据错误' + err);\r\n        }\r\n    })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/getRank.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"rankWrapper\",staticClass:\"rank-wrapper\"},[_c('v-scroll',{ref:\"scroll\",staticClass:\"scroll\",attrs:{\"data\":_vm.topList}},[_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.topList.length>0),expression:\"topList.length>0\"}],staticClass:\"rank\"},_vm._l((_vm.topList),function(list){return _c('li',{key:list.id,staticClass:\"rank-item\",on:{\"click\":function($event){return _vm.goRankDetail(list)}}},[_c('div',{staticClass:\"rank-pic\"},[_c('img',{attrs:{\"src\":list.picUrl}})]),_vm._v(\" \"),_c('ul',{staticClass:\"rank-songs\"},_vm._l((list.songList),function(song,index){return _c('li',{key:index,staticClass:\"song-desc\"},[_c('span',[_vm._v(_vm._s(index))]),_vm._v(\" \"),_c('span',{staticClass:\"song-name\"},[_vm._v(_vm._s(song.songname)+\" - \"+_vm._s(song.singername))])])}),0)])}),0)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.topList.length===0),expression:\"topList.length===0\"}],staticClass:\"loading-wrapper\"},[_c('v-loading')],1),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2db34204\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/rank/rank.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2db34204\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./rank.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./rank.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./rank.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2db34204\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./rank.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2db34204\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/rank/rank.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}