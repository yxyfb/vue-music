{"version":3,"sources":["webpack:///src/pages/recommend/components/songsheet.vue","webpack:///./src/api/getSongSheet.js","webpack:///./src/pages/recommend/components/songsheet.vue?bcc9","webpack:///./src/pages/recommend/components/songsheet.vue"],"names":["songsheet","data","songs","computed","extends_default","Object","vuex_esm","created","this","getData","methods","id","_Object$assign2","_this","songSheet","dissid","assign_default","recommendParams","g_tk","disstid","type","json","utf8","onlysong","hostUin","needNewCode","new_format","loginUin","defineProperty_default","axios","get","params","then","res","matchs","match","JSON","parse","code","ERR_OK","promise_default","a","resolve","cdlist","initData","songlist","console","log","$router","push","path","lists","ret","forEach","musicData","mid","song","components","v-detail","detail","components_songsheet","render","_h","$createElement","_c","_self","staticClass","attrs","bgImage","imgurl","title","dissname","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"kQAeAA,GACAC,KADA,WAEA,OACAC,WAGAC,SAAcC,OACdC,OAAAC,EAAA,EAAAD,EACA,eAGAE,QAXA,WAYAC,KAAAC,WAEAC,SACAD,QADA,WACA,IC3B6BE,EAAOC,EAE1BX,EDyBVY,EAAAL,KACAA,KAAAM,UAAAC,QC5B6BJ,EDmC7BH,KAAAM,UAAAC,OCjCUd,EAAOe,OAAiBC,KAAjBL,GACTM,KAAM,WACNC,QAASR,EACTS,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,SAAU,EACVC,QAAS,EACTC,YAAa,EACbC,WAAY,EACZC,SAAU,GAVDC,IAAAhB,EAAA,UAWA,GAXAgB,IAAAhB,EAAA,WAYC,YAZDgB,IAAAhB,EAAA,cAaI,GAbJA,IAgBNiB,IAAMC,IAjBF,qBAkBPC,OAAO9B,IACR+B,KAAK,SAAAC,GAEJ,GAAkB,iBADlBA,EAAMA,EAAIhC,MACiB,CACvB,IACIiC,EAASD,EAAIE,MADH,kBAEd,GAAGD,IACCD,EAAMG,KAAKC,MAAMH,EAAO,KACjBI,OAASC,IACZ,OAAOC,EAAAC,EAAQC,QAAQT,EAAIU,OAAO,QDOtDX,KAAA,SAAAC,GACAA,IACApB,EAAAX,MAAAW,EAAA+B,SAAAX,EAAAY,UACAC,QAAAC,IAAAlC,EAAAX,UATAM,KAAAwC,QAAAC,MACAC,KAAA,gBAYAN,SAhBA,SAgBAO,GACA,IAAAC,KAMA,OALAD,EAAAE,QAAA,SAAAC,GACAA,EAAAC,KAAAD,EAAA3C,IACAyC,EAAAH,KAAA5C,OAAAmD,EAAA,EAAAnD,CAAAiD,MAGAF,IAGAK,YACAC,WAAAC,EAAA,IErDeC,GADEC,OAFjB,WAA0B,IAAaC,EAAbtD,KAAauD,eAA0BC,EAAvCxD,KAAuCyD,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,cAAwBF,EAAA,YAAiBG,OAAOC,QAAhI5D,KAAgIM,UAAAuD,OAAAC,MAAhI9D,KAAgIM,UAAAyD,SAAArE,MAAhIM,KAAgIN,UAAiF,IAE1NsE,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE3E,EACA4D,GATF,EAVA,SAAAgB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/7.d17d1a1e1cbf4cd82b7d.js","sourcesContent":["<template>\r\n    <div class=\"songsheet\">\r\n        <v-detail :bgImage='songSheet.imgurl'\r\n                  :title='songSheet.dissname'\r\n                  :songs='songs'>\r\n        </v-detail>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters} from 'vuex'\r\nimport Detail from 'common/detail/detail'\r\nimport {getSongSheet} from 'api/getSongSheet'\r\nimport {createSongSheet} from 'js/song'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            songs: []\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            'songSheet'\r\n        ])\r\n    },\r\n    created() {\r\n        this.getData();\r\n    },\r\n    methods: {\r\n        getData() {\r\n            if(!this.songSheet.dissid) { //如果没获取到歌单id，则返回推荐页面\r\n                this.$router.push({\r\n                    path:'/recommend'\r\n                });\r\n                return;\r\n            }\r\n\r\n            getSongSheet(this.songSheet.dissid).then(res => {\r\n                if(res) {\r\n                    this.songs = this.initData(res.songlist);\r\n                    console.log(this.songs);\r\n                }\r\n            })\r\n        },\r\n        initData(lists) {\r\n            let ret = [];\r\n            lists.forEach(musicData => {\r\n                if(musicData.mid && musicData.id) {\r\n                    ret.push(createSongSheet(musicData));\r\n                }\r\n            })\r\n            return ret;\r\n        }\r\n    },\r\n    components: {\r\n        'v-detail': Detail\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~styles/variable';\r\n@import '~styles/mixin';\r\n\r\n.songsheet\r\n    fixed()\r\n    background: $color-background\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/recommend/components/songsheet.vue","import axios from 'axios'\r\nimport {ERR_OK,recommendParams} from './config'\r\n\r\nexport const getSongSheet = (id) => {\r\n    const url ='/api/getSongSheet';\r\n    const data = Object.assign({},recommendParams,{\r\n        g_tk: 1663279238,\r\n        disstid: id,\r\n        type: 1,\r\n        json: 1,\r\n        utf8: 1,\r\n        onlysong: 0,\r\n        hostUin: 0,\r\n        needNewCode: 0,\r\n        new_format: 1,\r\n        loginUin: 0,\r\n        hostUin: 0,\r\n        platform: 'yqq.json',\r\n        needNewCode: 0\r\n    });\r\n\r\n    return axios.get(url,{\r\n        params:data\r\n    }).then(res => {\r\n        res = res.data;\r\n        if(typeof res === 'string'){\r\n            let pattern = /^\\w+\\(({.+})\\)/;  //  .号匹配任意字符\r\n            let matchs = res.match(pattern);\r\n            if(matchs){\r\n                res = JSON.parse(matchs[1]); \r\n                if(res.code === ERR_OK) {\r\n                    return Promise.resolve(res.cdlist[0])\r\n                }\r\n            }\r\n        }\r\n    })\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/getSongSheet.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"songsheet\"},[_c('v-detail',{attrs:{\"bgImage\":_vm.songSheet.imgurl,\"title\":_vm.songSheet.dissname,\"songs\":_vm.songs}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3c532a91\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/recommend/components/songsheet.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3c532a91\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./songsheet.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./songsheet.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./songsheet.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c532a91\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./songsheet.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3c532a91\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/recommend/components/songsheet.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}