{"version":3,"sources":["webpack:///src/pages/rank/components/rank-detail.vue","webpack:///./src/api/getRankDetail.js","webpack:///./src/pages/rank/components/rank-detail.vue?95ab","webpack:///./src/pages/rank/components/rank-detail.vue"],"names":["rank_detail","data","songs","topInfo","created","this","getData","methods","id","_this","topList","$router","push","path","assign_default","recommendParams","g_tk","topid","needNewCode","uin","tpl","page","type","platform","jsonp","param","then","res","code","ERR_OK","Error","catch","err","console","log","topinfo","initData","songlist","arr","ret","forEach","musicData","songmid","albummid","Object","song","computed","extends_default","vuex_esm","components","v-detail","detail","components_rank_detail","render","_h","$createElement","_c","_self","staticClass","attrs","iconShow","bgImage","image","title","ListName","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"+MAeAA,GACAC,KADA,WAEA,OACAC,SACAC,aAGAC,QAPA,WAQAC,KAAAC,WAEAC,SACAD,QADA,WACA,ICvB8BE,EAEpBP,EDqBVQ,EAAAJ,KACAA,KAAAK,QAAAF,IACAH,KAAAM,QAAAC,MACAC,KAAA,WC1B8BL,ED6B9BH,KAAAK,QAAAF,GC3BUP,EAAOa,OAAiBC,KAC1BC,KAAM,WACNC,MAAOT,EACPU,YAAa,EACbC,IAAK,EACLC,IAAK,EACLC,KAAM,SACNC,KAAM,MACNC,SAAU,OAGPC,YAZK,sDAYKvB,GACbwB,MAAM,kBACPC,KAAK,SAAAC,GACJ,GAAGA,EAAIC,OAASC,IACZ,OAAOF,EAGX,MAAM,IAAIG,MAAM,mBACjBC,MAAM,SAAAC,GACFA,GACCC,QAAQC,IAAI,eAAgBF,MDMxCN,KAAA,SAAAC,GACAA,IACAlB,EAAAN,QAAAwB,EAAAQ,QACA1B,EAAAP,MAAAO,EAAA2B,SAAAT,EAAAU,UAAAJ,QAAAC,IAAAzB,EAAAP,WAIAkC,SAdA,SAcAE,GACA,IAAAC,KAMA,OALAD,EAAAE,QAAA,SAAAC,GACAA,EAAAxC,KAAAyC,SAAAD,EAAAxC,KAAA0C,UACAJ,EAAA3B,KAAAgC,OAAAC,EAAA,EAAAD,CAAAH,EAAAxC,SAGAsC,IAGAO,SAAcC,OACdH,OAAAI,EAAA,EAAAJ,EACA,aAGAK,YACAC,WAAAC,EAAA,IEpDeC,GADEC,OAFjB,WAA0B,IAAaC,EAAbjD,KAAakD,eAA0BC,EAAvCnD,KAAuCoD,MAAAD,IAAAF,EAAwB,OAA/DjD,KAA+D,MAAAmD,EAAA,OAA6BE,YAAA,gBAA0BF,EAAA,YAAiBG,OAAOC,UAAA,EAAAC,QAA9IxD,KAA8IH,MAAA,GAAA4D,MAAAC,MAA9I1D,KAA8IF,QAAA6D,SAAA9D,MAA9IG,KAA8IH,UAA6F,GAA3OG,KAA2O4D,MAEpPC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACErE,EACAoD,GATF,EAVA,SAAAkB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/5.358d864618e442825d6d.js","sourcesContent":["<template>\r\n    <div class=\"rank-detail\" v-if='songs'>\r\n        <v-detail :iconShow='true'\r\n                  :bgImage='songs[0].image'\r\n                  :title='topInfo.ListName'\r\n                  :songs='songs'></v-detail>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Detail from 'common/detail/detail'\r\nimport {getRankDetail} from 'api/getRankDetail'\r\nimport {mapGetters} from 'vuex'\r\nimport {createSong} from 'js/song'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            songs: [],\r\n            topInfo: {}\r\n        }\r\n    },\r\n    created() {\r\n        this.getData();\r\n    },\r\n    methods: {\r\n        getData() {\r\n            if(!this.topList.id) {\r\n                this.$router.push({\r\n                    path:'/rank'\r\n                });\r\n            }\r\n            getRankDetail(this.topList.id).then(res => {\r\n                if(res) {\r\n                    this.topInfo = res.topinfo;\r\n                    this.songs = this.initData(res.songlist);console.log(this.songs)\r\n                }\r\n            })\r\n        },\r\n        initData(arr) {\r\n            let ret = [];\r\n            arr.forEach(musicData => {\r\n                if(musicData.data.songmid && musicData.data.albummid) {\r\n                    ret.push(createSong(musicData.data));\r\n                }\r\n            });\r\n            return ret;\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            'topList'\r\n        ]) \r\n    },\r\n    components: {\r\n        'v-detail': Detail\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~styles/variable';\r\n@import '~styles/mixin';\r\n\r\n.rank-detail\r\n    fixed()\r\n    background: $color-background\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/rank/components/rank-detail.vue","import jsonp from 'js/jsonp'\r\nimport {recommendParams,ERR_OK} from './config'\r\n\r\nexport const getRankDetail = (id) => {\r\n    const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg';\r\n    const data = Object.assign({},recommendParams,{\r\n        g_tk: 1928093487,\r\n        topid: id,\r\n        needNewCode: 1,\r\n        uin: 0,\r\n        tpl: 3,\r\n        page: 'detail',\r\n        type: 'top',\r\n        platform: 'h5',\r\n    });\r\n    \r\n    return jsonp(url,data,{\r\n        param:'jsonpCallback'\r\n    }).then(res => {\r\n        if(res.code === ERR_OK) {\r\n            return res;\r\n        }\r\n\r\n        throw new Error('没有获取到排行榜详情页数据')\r\n    }).catch(err => {\r\n        if(err) {\r\n            console.log('获取排行榜详情页数据错误'+ err)\r\n        }\r\n    })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/getRankDetail.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.songs)?_c('div',{staticClass:\"rank-detail\"},[_c('v-detail',{attrs:{\"iconShow\":true,\"bgImage\":_vm.songs[0].image,\"title\":_vm.topInfo.ListName,\"songs\":_vm.songs}})],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-91095040\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/rank/components/rank-detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-91095040\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./rank-detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./rank-detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./rank-detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-91095040\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./rank-detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-91095040\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/rank/components/rank-detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}