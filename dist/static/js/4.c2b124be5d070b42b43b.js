webpackJsonp([4],{"39Pg":function(t,e){},YdMz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),r=i.n(s),n=i("CFd4"),a=i("xQdF"),o=i("NYxO"),l=i("5jRo"),c=Object(a.b)("transform"),u={mixins:[l.a],data:function(){return{curIndex:0,scrollY:0,diff:-1}},created:function(){this.touch={},this.scrollBarList_height=.36*parseFloat(document.documentElement.style.fontSize),this.scroll_title_height=.6*parseFloat(document.documentElement.style.fontSize),this.groupHeightArr=[]},props:{singerList:{type:Array,default:[]}},methods:r()({onScrollBarTouchStart:function(t){var e=parseInt(Object(a.a)(t.target,"index")),i=t.touches[0];this.touch.y1=i.pageY,this.touch.initIndex=e,this._scrollToElement(e)},onScrollBarTouchMove:function(t){this.touch.y2=t.touches[0].pageY;var e=(this.touch.y2-this.touch.y1)/this.scrollBarList_height,i=this.touch.initIndex+e;this._scrollToElement(i)},_scrollToElement:function(t){this.$refs.scroll.scrollToElement(this.$refs.listGroup[t],0)},scroll:function(t){this.scrollY=t.y},_getGroupHeight:function(){var t=this.$refs.listGroup,e=0;this.groupHeightArr.push(e);for(var i=0;i<t.length-1;i++)e+=t[i].offsetHeight,this.groupHeightArr.push(e)},goSingerDetail:function(t){this.$router.push({path:"/singer/"+t.mid}),this.setSinger(t)},changeListBottom:function(t){var e=this,i=t.length>0?"1.2rem":0;setTimeout(function(){e.$refs.scroll.$el.style.bottom=i,e.$refs.scroll.refresh()},1e3)}},Object(o.d)({setSinger:"SET_SINGER"})),watch:{singerList:function(){var t=this;setTimeout(function(){t._getGroupHeight()},20)},scrollY:function(t){this.$refs.fixedList.style.opacity=t>0?0:1;for(var e=this.groupHeightArr,i=0;i<e.length-1;i++){var s=e[i],r=e[i+1];Math.abs(t)>=s&&Math.abs(t)<r?(this.curIndex=i,this.diff=r+t):Math.abs(t)>r&&(this.curIndex=i+1,this.$refs.fixedList.style[c]="translate3d(0,0,0)")}},diff:function(t){var e=t>0&&t<this.scroll_title_height?t-this.scroll_title_height:0;this.$refs.fixedList.style[c]="translate3d(0,"+e+"px,0)"}},computed:{scrollBarData:function(){return this.singerList.map(function(t){return t.title.substr(0,1)})},fixedText:function(){return this.scrollY>0?"":this.singerList[this.curIndex]?this.singerList[this.curIndex].title:""}},components:{"v-scroll":n.a}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.singerList.length>0?i("v-scroll",{ref:"scroll",staticClass:"singerList",attrs:{probeType:3,listenScroll:!0,click:!1},on:{scroll:t.scroll}},[i("ul",t._l(t.singerList,function(e){return i("li",{key:e.title,ref:"listGroup",refInFor:!0,staticClass:"list-group"},[i("h3",{staticClass:"list-group-title"},[t._v(t._s(e.title))]),t._v(" "),i("ul",t._l(e.items,function(e){return i("li",{key:e.mid,staticClass:"list-group-item",on:{click:function(i){return t.goSingerDetail(e)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"item.avatar"}],staticClass:"avatar"}),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(e.name))])])}),0)])}),0),t._v(" "),t.scrollBarData?i("ul",{staticClass:"scroll-bar",on:{touchstart:function(e){return e.preventDefault(),t.onScrollBarTouchStart(e)},touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.onScrollBarTouchMove(e)}}},t._l(t.scrollBarData,function(e,s){return i("li",{key:s,staticClass:"bar-item",class:{curbar:s===t.curIndex},attrs:{"data-index":s}},[t._v(t._s(e))])}),0):t._e(),t._v(" "),i("div",{ref:"fixedList",staticClass:"fixed-list"},[i("h3",{staticClass:"fixed-title"},[t._v(t._s(t.fixedText))])])]):t._e()},staticRenderFns:[]};var f=i("VU/8")(u,h,!1,function(t){i("39Pg")},"data-v-11222cf6",null).exports,g=i("woOf"),d=i.n(g),m=i("cQcd"),p=i("T452"),v=i("R8C3"),_={name:"singer",data:function(){return{singerList:[]}},created:function(){this._getData()},methods:{_getData:function(){var t,e=this;(t=d()({},p.b,{g_tk:1928093487,channel:"singer",page:"list",key:"all_all_all",pagesize:100,pagenum:1,hostUin:0,needNewCode:0,platform:"yqq"}),Object(m.a)("https://c.y.qq.com/v8/fcg-bin/v8.fcg",t,{param:"jsonpCallback"}).then(function(t){if(t.code===p.a)return t.data;throw new Error("没有获取到数据！")}).catch(function(t){t&&console.log("歌手列表获取错误"+t)})).then(function(t){e.singerList=e._initData(t.list),console.log(e.singerList)})},_initData:function(t){var e={hot:{title:"热门",items:[]}};t.forEach(function(t,i){i<10&&e.hot.items.push(new v.a({mid:t.Fsinger_mid,name:t.Fsinger_name}));var s=t.Findex;e[s]||(e[s]={title:s,items:[]}),e[s].items.push(new v.a({mid:t.Fsinger_mid,name:t.Fsinger_name}))});var i=[],s=[];for(var r in e){var n=e[r];n.title.match(/[a-zA-Z]/)?s.push(n):"热门"===n.title&&i.push(n)}return s.sort(function(t,e){return t.title.charCodeAt(t)-e.title.charCodeAt(e)}),i.concat(s)}},components:{"v-singerList":f}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"singer"},[e("v-singerList",{attrs:{singerList:this.singerList}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var y=i("VU/8")(_,x,!1,function(t){i("xYjN")},"data-v-28ac3596",null);e.default=y.exports},xYjN:function(t,e){}});
//# sourceMappingURL=4.c2b124be5d070b42b43b.js.map